(function(){"use strict";const a="pclsoat_license_token_v1";function l(e){let t="";const o=e instanceof Uint8Array?e:new Uint8Array(e);for(let n=0;n<o.length;n++)t+=String.fromCharCode(o[n]);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function u(e){const t=e.replace(/-/g,"+").replace(/_/g,"/")+"===".slice((e.length+3)%4),o=atob(t),r=new Uint8Array(o.length);for(let n=0;n<o.length;n++)r[n]=o.charCodeAt(n);return r}function i(e){return new TextEncoder().encode(e)}async function f(e,t){const o=await crypto.subtle.importKey("raw",i(e),{name:"HMAC",hash:"SHA-256"},!1,["sign"]),r=await crypto.subtle.sign("HMAC",o,i(t));return l(new Uint8Array(r))}function d(){return Date.now()}function E(e){const t=e-d();return Math.floor(t/(24*3600*1e3))}async function p(e){return{ok:!1,reason:"SECRET vac\xEDo en la PWA. Mantiene modo FREE."}}function y(e){localStorage.setItem(a,e)}function g(){return localStorage.getItem(a)||""}function T(){localStorage.removeItem(a)}window.PCLSOAT_LICENSE={verifyToken:p,saveToken:y,loadToken:g,clearToken:T,STORAGE_KEY:a}})();
